<!DOCTYPE html>
<html class="dark" lang="es">
<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>React Music Player Prototype</title>

    <!-- External Libraries -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/history@5/umd/history.development.js"></script>
    <script src="https://unpkg.com/react-router@6.3.0/umd/react-router.development.js"></script>
    <script src="https://unpkg.com/react-router-dom@6.3.0/umd/react-router-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    
    <!-- Fonts and Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Spline+Sans:wght@400;500;600;700&amp;display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    
    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#13ec5b",
                        "background-light": "#f0f2f5",
                        "background-dark": "#121212",
                        "surface-light": "#ffffff",
                        "surface-dark": "#1e1e1e",
                        "on-surface-light": "#121212",
                        "on-surface-dark": "#e0e0e0",
                        "on-surface-variant-light": "#757575",
                        "on-surface-variant-dark": "#9e9e9e",
                        // Added from search page for compatibility
                        "card-light": "#ffffff",
                        "card-dark": "#1e1e1e",
                        "text-primary-light": "#000000",
                        "text-primary-dark": "#ffffff",
                        "text-secondary-light": "#6b7280",
                        "text-secondary-dark": "#a0a0a0"
                    },
                    fontFamily: {
                        "display": ["Spline Sans", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "1rem",
                        "lg": "2rem",
                        "xl": "3rem",
                        "full": "9999px"
                    },
                    boxShadow: {
                        'neumorphic-light': '5px 5px 10px #d9dbde, -5px -5px 10px #ffffff',
                        'neumorphic-dark': '5px 5px 10px #0d0d0d, -5px -5px 10px #171717',
                        'neumorphic-inset-light': 'inset 5px 5px 10px #d9dbde, inset -5px -5px 10px #ffffff',
                        'neumorphic-inset-dark': 'inset 5px 5px 10px #0d0d0d, inset -5px -5px 10px #171717'
                    }
                },
            },
        }
    </script>
    
    <!-- Custom Styles -->
    <style>
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
        }
        .material-symbols-outlined.filled {
            font-variation-settings: 'FILL' 1;
        }
        body {
            min-height: max(884px, 100dvh);
        }
        input[type=range] {
            -webkit-appearance: none; appearance: none;
            background: transparent; cursor: pointer;
        }
        input[type=range]::-webkit-slider-runnable-track {
            background: #e0e0e0; height: 0.25rem; border-radius: 9999px;
        }
        .dark input[type=range]::-webkit-slider-runnable-track {
            background: #3e3e3e;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none; appearance: none;
            margin-top: -6px;
            background-color: #13ec5b;
            height: 1rem; width: 1rem;
            border-radius: 9999px;
        }
    </style>
</head>
<body class="bg-background-light dark:bg-background-dark font-display text-on-surface-light dark:text-on-surface-dark">
    <div id="root"></div>

    <script type="text/babel">
        // Destructure globals
        const { useState, useEffect } = React;
        const { createRoot } = ReactDOM;
        const { MemoryRouter, Routes, Route, Link, useNavigate } = ReactRouterDOM;

        // --- Data ---
        const songData = {
            title: "Luces de Neón",
            artist: "Valeria Synth",
            albumArt: "https://lh3.googleusercontent.com/aida-public/AB6AXuC0KeIJ3evKtZsmi8k3MeFEKVZmd2aUY6707SQI1YxrK9q0bBoh_0MLQ1lunCUN-Xj6BAhQ-z4c6bNrnwKO86ZNxQaisEnp5wZupSGSgzzMAqm3i4kGNIBSq_rXqqed-NBizXefxz3I8ccvk5onmDAcMmte0RgM1BB1iubyxX_KRU6JCLnhLmE7N_yatGGGH2H0zy6Uquw0sQrNFNRW5SQtHikwUxnWR7e4tSgX7z1spTbcSY9ittsjxOA5syC6iw9Nw03ZNsDFOf4",
            currentTime: "1:25",
            totalTime: "3:32",
            progress: 40,
        };

        const playlist = [
            { id: 1, title: "Luces de Neón", artist: "Valeria Synth", art: songData.albumArt, isCurrent: true },
            { id: 2, title: "Amanecer Digital", artist: "Cybernetica", art: songData.albumArt },
            { id: 3, title: "Eco Eléctrico", artist: "Valeria Synth", art: "https://lh3.googleusercontent.com/aida-public/AB6AXuDF1csw76ZbFQu9ooQYHhzcys-OwBux9OuOB-FBEs2UZ2jLHM1M3_jTmEJR3ngp88ahWWJ5sGXPbkGobrUUb4JbwSRISMv9-errpZvT21tQ6xMi7SeOW8tG1e-OV4tNEfrDgn7XmFeOw4E65goaIYnFk7T0DQ5czxr6jrD2yVXJ0e2nsiUOZt06nF6dDo2Ik-8h3Hf2Yf9_16EBei9xYZJce3zsIdWeTeemxzJC4vf8wh5b6xUB0LPsuXCuHbE_F9LHpDiNUuSCRCk" },
            { id: 4, title: "Ritmo Futuro", artist: "DJ Electrón", art: null },
        ];

        // --- Reusable Components ---
        const NeumorphicButton = ({ children, className = '', isInset = false, ...props }) => {
            const baseClasses = "flex items-center justify-center rounded-full transition-all";
            const shadowClasses = isInset 
                ? 'shadow-neumorphic-inset-light dark:shadow-neumorphic-inset-dark'
                : 'shadow-neumorphic-light dark:shadow-neumorphic-dark active:shadow-neumorphic-inset-light dark:active:shadow-neumorphic-inset-dark';
            return (
                <button className={`${baseClasses} ${shadowClasses} ${className}`} {...props}>
                    {children}
                </button>
            );
        };
        
        const PlayerHeader = () => {
             const navigate = useNavigate();
             return (
                <div className="flex items-center p-4 pb-2 justify-between shrink-0">
                    <div className="flex w-12 items-center justify-start">
                        <NeumorphicButton className="h-12 w-12 text-on-surface-light dark:text-on-surface-dark" onClick={() => navigate(-1)}>
                            <span className="material-symbols-outlined">expand_more</span>
                        </NeumorphicButton>
                    </div>
                    <h2 className="text-on-surface-variant-light dark:text-on-surface-variant-dark text-sm font-bold tracking-widest flex-1 text-center uppercase">REPRODUCIENDO</h2>
                    <div className="flex w-12 items-center justify-end">
                        <NeumorphicButton className="h-12 w-12 text-on-surface-light dark:text-on-surface-dark">
                            <span className="material-symbols-outlined">more_vert</span>
                        </NeumorphicButton>
                    </div>
                </div>
            );
        }

        const SongInfo = () => (
            <div className="flex-shrink-0 px-6 pt-0 pb-2">
                <div className="flex justify-between items-center">
                    <div className="flex-1 min-w-0">
                        <h1 className="text-on-surface-light dark:text-on-surface-dark tracking-tight text-2xl font-bold leading-tight truncate">{songData.title}</h1>
                        <p className="text-on-surface-variant-light dark:text-on-surface-variant-dark text-base font-normal leading-normal truncate pt-1">{songData.artist}</p>
                    </div>
                    <NeumorphicButton className="h-12 w-12 ml-4 flex-shrink-0 text-on-surface-variant-light dark:text-on-surface-variant-dark hover:text-primary">
                        <span className="material-symbols-outlined">favorite_border</span>
                    </NeumorphicButton>
                </div>
            </div>
        );

        const ProgressBar = () => (
            <div className="flex flex-col gap-2 px-6 pt-4 pb-2">
                <div className="rounded-full bg-transparent p-1 shadow-neumorphic-inset-light dark:shadow-neumorphic-inset-dark">
                    <div className="h-1.5 rounded-full bg-primary" style={{ width: `${songData.progress}%` }}></div>
                </div>
                <div className="flex justify-between">
                    <p className="text-on-surface-variant-light dark:text-on-surface-variant-dark text-xs font-normal leading-normal">{songData.currentTime}</p>
                    <p className="text-on-surface-variant-light dark:text-on-surface-variant-dark text-xs font-normal leading-normal">{songData.totalTime}</p>
                </div>
            </div>
        );

        const PlayerControls = () => (
             <div className="flex items-center justify-between gap-6 px-8 py-4">
                <NeumorphicButton className="h-16 w-16 text-on-surface-light dark:text-on-surface-dark">
                    <span className="material-symbols-outlined text-4xl">skip_previous</span>
                </NeumorphicButton>
                <button className="flex items-center justify-center rounded-full h-20 w-20 bg-primary text-black shadow-lg shadow-primary/40">
                    <span className="material-symbols-outlined text-5xl filled">pause</span>
                </button>
                <NeumorphicButton className="h-16 w-16 text-on-surface-light dark:text-on-surface-dark">
                    <span className="material-symbols-outlined text-4xl">skip_next</span>
                </NeumorphicButton>
            </div>
        );

        const BottomNav = ({ active }) => (
            <div className="flex items-center justify-around px-6 py-2 pb-6 border-t border-black/5 dark:border-white/5 mt-auto">
                <Link to="/" className={`flex flex-col items-center gap-1 ${active === 'home' ? 'text-primary' : 'text-on-surface-variant-light dark:text-on-surface-variant-dark'}`}>
                    <span className={`material-symbols-outlined ${active === 'home' ? 'filled' : ''}`}>home</span>
                    <span className={`text-xs ${active === 'home' ? 'font-medium' : ''}`}>Inicio</span>
                </Link>
                <Link to="/search" className={`flex flex-col items-center gap-1 ${active === 'search' ? 'text-primary' : 'text-on-surface-variant-light dark:text-on-surface-variant-dark'}`}>
                    <span className={`material-symbols-outlined ${active === 'search' ? 'filled' : ''}`}>search</span>
                    <span className={`text-xs ${active === 'search' ? 'font-medium' : ''}`}>Buscar</span>
                </Link>
                <Link to="/library" className={`flex flex-col items-center gap-1 ${active === 'library' ? 'text-primary' : 'text-on-surface-variant-light dark:text-on-surface-variant-dark'}`}>
                    <span className={`material-symbols-outlined ${active === 'library' ? 'filled' : ''}`}>library_music</span>
                    <span className={`text-xs ${active === 'library' ? 'font-medium' : ''}`}>Biblioteca</span>
                </Link>
            </div>
        );
        
        const PlayerBottomNav = () => (
             <div className="flex items-center justify-around px-6 py-2 pb-6 border-t border-black/5 dark:border-white/5 mt-auto">
                <Link to="/" className="flex flex-col items-center gap-1 text-primary">
                    <span className="material-symbols-outlined filled">home</span>
                    <span className="text-xs font-medium">Inicio</span>
                </Link>
                <Link to="/search" className="flex flex-col items-center gap-1 text-on-surface-variant-light dark:text-on-surface-variant-dark">
                    <span className="material-symbols-outlined">search</span>
                    <span className="text-xs">Buscar</span>
                </Link>
                <Link to="/library" className="flex flex-col items-center gap-1 text-on-surface-variant-light dark:text-on-surface-variant-dark">
                    <span className="material-symbols-outlined">library_music</span>
                    <span className="text-xs">Biblioteca</span>
                </Link>
            </div>
        );
        
        const ToggleSwitch = ({ initial = false }) => {
            const [on, setOn] = useState(initial);
            return (
                <div onClick={() => setOn(!on)} className="relative w-12 h-6 rounded-full bg-gray-200 dark:bg-gray-700 cursor-pointer">
                    <div className={`absolute left-0 top-0 w-6 h-6 rounded-full bg-primary shadow-md transform transition-transform ${on ? 'translate-x-6' : ''}`}></div>
                </div>
            );
        };
        
        const SmallToggleSwitch = ({ initial = false }) => {
             const [active, setActive] = useState(initial);
            return (
                <div onClick={() => setActive(!active)} className={`w-10 h-5 rounded-full cursor-pointer relative transition-colors ${active ? 'bg-primary' : 'bg-gray-200 dark:bg-gray-700'}`}>
                    <div className={`w-5 h-5 rounded-full bg-white dark:bg-surface-light shadow transform transition-transform ${active ? 'translate-x-5' : ''}`}></div>
                </div>
            );
        };
        
        const RangeSlider = ({ label, id, value }) => (
            <div className="flex flex-col gap-1">
                <label className="text-sm font-medium text-on-surface-variant-light dark:text-on-surface-variant-dark" htmlFor={id}>{label}</label>
                <div className="relative flex items-center">
                    <span className="text-xs text-on-surface-variant-light dark:text-on-surface-variant-dark">-12</span>
                    <input className="w-full mx-2" id={id} max="12" min="-12" type="range" defaultValue={value} />
                    <span className="text-xs text-on-surface-variant-light dark:text-on-surface-variant-dark">+12</span>
                </div>
            </div>
        );


        // --- Player Screen Views ---
        const CoverView = () => (
            <div className="w-full bg-center bg-no-repeat bg-cover aspect-auto rounded-xl flex-1" style={{ backgroundImage: `url("${songData.albumArt}")` }} />
        );

        const EqualizerView = () => (
            <div className="w-full bg-surface-light dark:bg-surface-dark rounded-xl flex-1 flex items-center justify-center p-6">
                <div className="flex items-end justify-center w-full h-4/5 gap-2">
                    <div className="w-4 bg-primary/20 rounded-full animate-pulse" style={{ height: '40%', animationDelay: '-0.4s' }}></div>
                    <div className="w-4 bg-primary rounded-full animate-pulse" style={{ height: '70%', animationDelay: '-0.2s' }}></div>
                    <div className="w-4 bg-primary/20 rounded-full animate-pulse" style={{ height: '55%' }}></div>
                    <div className="w-4 bg-primary rounded-full animate-pulse" style={{ height: '80%', animationDelay: '-0.3s' }}></div>
                    <div className="w-4 bg-primary/20 rounded-full animate-pulse" style={{ height: '60%', animationDelay: '-0.1s' }}></div>
                    <div className="w-4 bg-primary rounded-full animate-pulse" style={{ height: '45%', animationDelay: '-0.5s' }}></div>
                    <div className="w-4 bg-primary/20 rounded-full animate-pulse" style={{ height: '75%' }}></div>
                </div>
            </div>
        );
        
        const EqualizerDetailView = () => (
             <div className="w-full bg-surface-light dark:bg-surface-dark rounded-xl flex-1 flex flex-col p-6 text-on-surface-light dark:text-on-surface-dark">
                <div className="flex justify-between items-center mb-6">
                    <h3 className="font-bold text-lg">Ecualizador</h3>
                    <ToggleSwitch initial={true}/>
                </div>
                <div className="flex-grow space-y-4">
                    <RangeSlider label="Graves" id="graves" value="3" />
                    <RangeSlider label="Medios" id="medios" value="-2" />
                    <RangeSlider label="Agudos" id="agudos" value="5" />
                </div>
                <div className="flex justify-between items-center mt-6">
                    <div className="flex flex-col items-center gap-1">
                        <label className="text-sm font-medium text-on-surface-variant-light dark:text-on-surface-variant-dark">Compressor</label>
                        <SmallToggleSwitch />
                    </div>
                    <div className="flex flex-col items-center gap-1">
                        <label className="text-sm font-medium text-on-surface-variant-light dark:text-on-surface-variant-dark">3D Audio</label>
                        <SmallToggleSwitch initial={true}/>
                    </div>
                </div>
            </div>
        );


        const WaveView = () => (
            <div className="w-full bg-surface-light dark:bg-surface-dark rounded-xl flex-1 flex items-center justify-center p-6">
                <svg className="w-full h-full text-primary" preserveAspectRatio="none" viewBox="0 0 100 50">
                    <path d="M0,25 Q5,10 10,25 T20,25 Q25,40 30,25 T40,25 Q45,15 50,25 T60,25 Q65,5 70,25 T80,25 Q85,35 90,25 T100,25" fill="none" stroke="currentColor" strokeWidth="2"></path>
                </svg>
            </div>
        );
        
        const WaveViewInteractive = () => (
            <div className="w-full flex-1 rounded-xl bg-surface-light dark:bg-surface-dark p-6 flex items-center justify-center">
                <div className="flex flex-col items-center justify-center w-full h-full text-on-surface-variant-light dark:text-on-surface-variant-dark">
                    <svg className="w-full h-full" preserveAspectRatio="none" viewBox="0 0 200 60">
                        <defs>
                            <linearGradient id="wave-gradient" x1="0%" x2="0%" y1="0%" y2="100%">
                                <stop offset="0%" style={{stopColor: '#13ec5b', stopOpacity: 1}}></stop>
                                <stop offset="100%" style={{stopColor: '#13ec5b', stopOpacity: 0.2}}></stop>
                            </linearGradient>
                        </defs>
                        <path d="M 0 30 C 10 10, 20 50, 30 30 S 50 10, 60 30 S 80 50, 90 30 S 110 10, 120 30 S 140 50, 150 30 S 170 10, 180 30 S 200 50, 200 30" fill="url(#wave-gradient)" stroke="#13ec5b" strokeWidth="2" vectorEffect="non-scaling-stroke"></path>
                    </svg>
                </div>
            </div>
        );


        const ListView = ({playlistData}) => (
            <div className="w-full bg-surface-light dark:bg-surface-dark rounded-xl flex-1 flex flex-col p-4 overflow-hidden">
                <h3 className="text-lg font-bold mb-3 px-2 text-on-surface-light dark:text-on-surface-dark">A continuación</h3>
                <div className="flex-1 overflow-y-auto space-y-2">
                    {playlistData.map(song => (
                        <div key={song.id} className={`flex items-center p-2 rounded-lg ${song.isCurrent ? 'bg-primary/10' : 'hover:bg-black/5 dark:hover:bg-white/5'}`}>
                            <div 
                                className="w-10 h-10 rounded bg-cover bg-center mr-3" 
                                style={{ backgroundImage: song.art ? `url("${song.art}")` : 'none', backgroundColor: song.art ? 'transparent' : '#e5e7eb' }}
                            ></div>
                            <div className="flex-1">
                                <p className="font-semibold text-sm text-on-surface-light dark:text-on-surface-dark">{song.title}</p>
                                <p className="text-xs text-on-surface-variant-light dark:text-on-surface-variant-dark">{song.artist}</p>
                            </div>
                            <button className="text-on-surface-variant-light dark:text-on-surface-variant-dark hover:text-red-500 ml-2">
                                <span className="material-symbols-outlined text-xl">delete</span>
                            </button>
                        </div>
                    ))}
                </div>
                <button className="mt-3 flex items-center justify-center w-full py-2 px-4 rounded-full bg-primary text-black text-sm font-bold shadow-lg shadow-primary/30 active:scale-95 transition-transform">
                    <span className="material-symbols-outlined text-xl mr-1">add</span>
                    Agregar Canción
                </button>
            </div>
        );


        // --- Screen Components (Pages) ---
        const PlayerScreen = ({ initialTab = 'cover', children }) => {
            const [activeTab, setActiveTab] = useState(initialTab);
            const navigate = useNavigate();
            
            const tabContent = () => {
                // This will render the specific view passed as a child
                return children(activeTab);
            };
            
            return (
                <div className="relative flex h-auto min-h-screen w-full flex-col bg-background-light dark:bg-background-dark group/design-root overflow-hidden">
                    <PlayerHeader />
                    <div className="flex w-full grow flex-col px-6 pt-4 pb-2">
                        <div className="flex flex-col flex-1">
                           <div className="w-full gap-1 overflow-hidden rounded-xl aspect-square flex shadow-neumorphic-light dark:shadow-neumorphic-dark">
                                {tabContent()}
                            </div>
                             <div className="flex justify-center gap-4 py-6">
                                <NeumorphicButton isInset={activeTab === 'equalizer'} onClick={() => { setActiveTab('equalizer'); navigate('/player-eq-detail')}} className={`h-12 w-12 ${activeTab === 'equalizer' ? 'text-primary' : 'text-on-surface-variant-light dark:text-on-surface-variant-dark'}`}>
                                    <span className="material-symbols-outlined filled">equalizer</span>
                                </NeumorphicButton>
                                <NeumorphicButton isInset={activeTab === 'wave'} onClick={() => {setActiveTab('wave'); navigate('/player-wave')}} className={`h-12 w-12 ${activeTab === 'wave' ? 'text-primary' : 'text-on-surface-variant-light dark:text-on-surface-variant-dark'}`}>
                                    <span className="material-symbols-outlined filled">waves</span>
                                </NeumorphicButton>
                                <NeumorphicButton isInset={activeTab === 'list'} onClick={() => { setActiveTab('list'); navigate('/player-list')}} className={`h-12 w-12 ${activeTab === 'list' ? 'text-primary' : 'text-on-surface-variant-light dark:text-on-surface-variant-dark'}`}>
                                    <span className="material-symbols-outlined filled">list</span>
                                </NeumorphicButton>
                            </div>
                        </div>
                    </div>
                    <SongInfo />
                    <ProgressBar />
                    <PlayerControls />
                    <PlayerBottomNav />
                </div>
            );
        };
        

        const SearchPage = () => {
             const navigate = useNavigate();
             const recentSearches = [
                {
                    id: 1,
                    image: "https://lh3.googleusercontent.com/aida-public/AB6AXuCzOjh2oWGy7ZqF3XYwdB9Y36Iz9wWbYrt_uuXAq9-SW_UzRWcE931-D_9kcgYMVfGgTlDiENlepoLwID3SEojEL8-a2pksC9mJzffqYw06vrm_9ABSkhMYFv6OWSCCir-OVZQ1Qpfa38xr6sro6Za-rjnKPBT53IT6Su7jrdKscq3SgRUXOPOKYssZegNEGbHzuKg77Fnf1v4c2Zyrl43IPSuS_gXi11LTsULvkiFTHJ2NjJvWq7Vx9yY9uZB8_ipQQvKS81NjlrY",
                    title: "Bohemian Rhapsody",
                    subtitle: "Canción • Queen",
                    type: "song"
                },
                {
                    id: 2,
                    image: "https://lh3.googleusercontent.com/aida-public/AB6AXuA-KNmOm1RU682Q8E8XgMlFvqIhHRrWjRYbirN6fSMMokjBa911vNbNa1c0roAfE6v0eax7LtExF1W9Vvck1TF0SZ7_pXMsbCdctjURlW3NHbsfHU-_d3Oswe1Z2XzsoQR7X5Lw98wkAMh4x7JeRZkzOqFb6QI7BOpvB8gqJzbm09STxa7vaMgfMh5Sv3Md0cltu4_qraSUe-6rQZwWAA3kNZ1FyCSh9x5GELADkAo2BeIHyekDqFzNG9e8_GMWJTRC4z1hGA4U3J0",
                    title: "Queen",
                    subtitle: "Artista",
                    type: "artist"
                },
                {
                    id: 3,
                    image: "https://lh3.googleusercontent.com/aida-public/AB6AXuAvcjsGKOAZWtvPd4pfLpWrFo1l5V2mCDJAHzOabQGSEaUIFLRzdQmfcUcewyOhUGSOtZgxLLQI88_2hkBYvylNOQCKXQwk4vyE8u_Kqt8uSSaP3x42rk_L3Lecm7FHehRNqPAV6aenN7LCMG_48k7RPsfq7W03gQNzC3hobyuar2BudqL2BrhjxGJ6ZOeWT8aXG4K2q03JoaypCvdqefoItXB5hFnsxbmK2AiHIpM6XMO8txqYyLfhRYkurpT_QBFrRkhhLMpPhX0",
                    title: "A Night at the Opera",
                    subtitle: "Álbum • Queen",
                    type: "album"
                }
            ];
            
            return (
                <div className="relative flex h-auto min-h-screen w-full flex-col bg-background-light dark:bg-background-dark">
                    <div className="sticky top-0 z-10 flex flex-col gap-2 bg-background-light/80 dark:bg-background-dark/80 p-4 pb-3 backdrop-blur-lg">
                        <div className="flex h-12 items-center justify-between">
                            <button onClick={() => navigate(-1)} className="flex size-12 shrink-0 items-center justify-start rounded-full text-text-primary-light dark:text-text-primary-dark">
                                <span className="material-symbols-outlined text-3xl">arrow_back_ios_new</span>
                            </button>
                        </div>
                        <h1 className="px-2 text-[34px] font-bold leading-tight tracking-tight text-text-primary-light dark:text-text-primary-dark">Búsqueda</h1>
                    </div>
                    <div className="px-4 pt-2 pb-4">
                        <div className="relative flex items-center">
                            <span className="material-symbols-outlined absolute left-4 text-text-secondary-light dark:text-text-secondary-dark">search</span>
                            <input className="w-full rounded-xl border-none bg-neutral-200/60 py-3 pl-12 pr-10 text-text-primary-light placeholder:text-text-secondary-light focus:ring-2 focus:ring-primary/50 dark:bg-card-dark dark:text-text-primary-dark dark:placeholder:text-text-secondary-dark" placeholder="Canciones, artistas o álbumes" type="text"/>
                            <span className="material-symbols-outlined absolute right-4 cursor-pointer text-text-secondary-light dark:text-text-secondary-dark">mic</span>
                        </div>
                    </div>
                    <div className="flex flex-col gap-4 px-4">
                        <h2 className="px-2 text-xl font-bold text-text-primary-light dark:text-text-primary-dark">Explorar todo</h2>
                        <div className="grid grid-cols-2 gap-3">
                            <div className="flex flex-col items-start justify-end gap-3 rounded-xl bg-card-light p-3 dark:bg-card-dark aspect-[4/3]">
                                <span className="material-symbols-outlined text-text-secondary-light dark:text-text-secondary-dark text-2xl">folder</span>
                                <p className="font-semibold text-text-primary-light dark:text-text-primary-dark">Almacenamiento interno</p>
                            </div>
                            <div className="flex flex-col items-start justify-end gap-3 rounded-xl bg-card-light p-3 dark:bg-card-dark aspect-[4/3]">
                                <span className="material-symbols-outlined text-text-secondary-light dark:text-text-secondary-dark text-2xl">sd_card</span>
                                <p className="font-semibold text-text-primary-light dark:text-text-primary-dark">Tarjeta SD</p>
                            </div>
                            <div className="flex flex-col items-start justify-end gap-3 rounded-xl bg-card-light p-3 dark:bg-card-dark aspect-[4/3]">
                                <span className="material-symbols-outlined text-text-secondary-light dark:text-text-secondary-dark text-2xl">cloud</span>
                                <p className="font-semibold text-text-primary-light dark:text-text-primary-dark">Google Drive</p>
                            </div>
                            <div className="flex flex-col items-start justify-end gap-3 rounded-xl bg-card-light p-3 dark:bg-card-dark aspect-[4/3]">
                                <span className="material-symbols-outlined text-text-secondary-light dark:text-text-secondary-dark text-2xl">cloud_queue</span>
                                <p className="font-semibold text-text-primary-light dark:text-text-primary-dark">OneDrive</p>
                            </div>
                        </div>
                    </div>
                    <div className="flex flex-col gap-3 px-4 pt-8 pb-32">
                        <div className="flex items-baseline justify-between px-2">
                            <h2 className="text-xl font-bold text-text-primary-light dark:text-text-primary-dark">Búsquedas recientes</h2>
                            <a className="text-sm font-semibold text-primary" href="#">Borrar</a>
                        </div>
                        <ul className="flex flex-col">
                            {recentSearches.map(item => (
                                <li key={item.id} className="flex items-center gap-4 rounded-lg p-2 hover:bg-neutral-100 dark:hover:bg-neutral-900/50">
                                    <img alt={`Art for ${item.title}`} className={`h-12 w-12 object-cover ${item.type === 'artist' ? 'rounded-full' : 'rounded-lg'}`} src={item.image} />
                                    <div className="flex flex-1 flex-col truncate">
                                        <p className="truncate font-semibold text-text-primary-light dark:text-text-primary-dark">{item.title}</p>
                                        <p className="truncate text-sm text-text-secondary-light dark:text-text-secondary-dark">{item.subtitle}</p>
                                    </div>
                                    <button className="group flex size-10 items-center justify-center rounded-full bg-card-light text-text-secondary-light shadow-sm transition-transform active:scale-95 dark:bg-card-dark dark:text-text-secondary-dark">
                                        <div className="flex size-full items-center justify-center rounded-full border border-neutral-200 group-hover:border-neutral-300 dark:border-neutral-700 dark:group-hover:border-neutral-600">
                                            <span className="material-symbols-outlined text-2xl">close</span>
                                        </div>
                                    </button>
                                </li>
                            ))}
                        </ul>
                    </div>
                    <div className="fixed bottom-0 left-0 z-20 w-full border-t border-neutral-200/80 bg-background-light/80 pb-6 pt-2 backdrop-blur-lg dark:border-neutral-800/80 dark:bg-background-dark/80">
                         <div className="mx-auto grid max-w-lg grid-cols-3 items-center justify-items-center">
                             <Link to="/" className="flex flex-col items-center justify-center gap-1 text-on-surface-variant-light dark:text-on-surface-variant-dark">
                                 <span className="material-symbols-outlined">home</span><span className="text-xs">Inicio</span>
                             </Link>
                             <Link to="/search" className="flex flex-col items-center justify-center gap-1 text-primary">
                                 <span className="material-symbols-outlined filled">search</span><span className="text-xs font-semibold">Búsqueda</span>
                             </Link>
                             <Link to="/library" className="flex flex-col items-center justify-center gap-1 text-on-surface-variant-light dark:text-on-surface-variant-dark">
                                 <span className="material-symbols-outlined">library_music</span><span className="text-xs">Biblioteca</span>
                             </Link>
                         </div>
                    </div>
                </div>
            );
        };
        
        const LibraryPage = () => {
             const navigate = useNavigate();
             const playlists = [
                { id: 1, title: 'Chill Vibes', author: 'Ti', songs: 50, image: 'https://lh3.googleusercontent.com/aida-public/AB6AXuC0DUt6lrmQf59n23rk24qJc-v__oPe33abFG0WE9z-91fdgHq_jwaqE7C7F6tizGqWJR80fFsrfkiwG2j9tjpji9swFS6itu2OJq0LxVCxQZ7hilgwAmsnKFiQNXTPoH64n7sg2D_8JIeT9bnAHcP26DNvDF8Th40GGe7qOovogih7eYxFBH5FaIbBpPjraKNOuUEOfmXkxVnzTMlEdZgAHLtZ5SiKQnbiFZPfEQo8LxlfgspnJrjPxfDuzMAE-ZFpVfKD5pklLNs' },
                { id: 2, title: 'Workout Hits', author: 'Ti', songs: 32, image: 'https://lh3.googleusercontent.com/aida-public/AB6AXuCxcd-_v89qYB029Ms6i96d1pAfzPFENwR7EKil8Q6YiOtI_az-5o2weYoP2A2vKwTycgX_Kc9B2DPi9RRpwQ7m_L5678PHHzVzXOUM6Hg_NJu7PoBygsyfxuvRlFiLduhEBO3kPWCXVLvS9YEQlZIKJoiiuOU_Q6zRk3s2-oE5AKe1mVyySrk-OaJ8pcPa4iSW644uXVAF4JpK0kgJAzd4Wm0vJbNmd5O70lvY0VQqnvJYZXafYlshm2ysdK-vrOygoCVXsABJOBw' },
                { id: 3, title: 'Noche de estrellas', author: 'Ti', songs: 78, image: 'https://lh3.googleusercontent.com/aida-public/AB6AXuAh1a4wH1lrNBoNIY5xSl1QfMlG6-CJmWS5uV5CKp4rqXKCypZv_zZlvpln2TxKXdqPKZfNBNkzi-4qSYUXePh9mvP-RbiC4_k98Wnjy4kxrXjjVxs8BN3SD_1Fi6t7ev8a898HFSZJ1Nqe86cspBH30o_YjtAVbhHvFTLFRo10HzG7QsPdt-t526ivu4F5VOwFYRheTqSUjOjAK6FJStjS2aIcc4qe_YAFDCzV8G_UeIpIROMcqaxvtelh37HuGYmMJVIEEw6ySiM' },
                { id: 4, title: 'Indie Rock', author: 'Ti', songs: 112, image: 'https://lh3.googleusercontent.com/aida-public/AB6AXuBrZhGZlghjefTLUmGu3Qc_sMnrBz-l6wNo3H3sanHXyCNW6jB_I2M-itFzJgYLs2rIUqHpXnKo7o-s_Y-h-c3ne7M83FYLjVPf2Bdy-hHSWeTnHE7_nSieAOY_mIaZq-lVWB2yOuQI2es-u0B4TIs8ybez_XgcLL5H_RC5TBaU_yhl6rzwDVgYI7wGvhodBJT_qKt34JG6DYej3bFcHyFmc3jGtHnvPLFfYfWN9WTsTj79l9f4r6Hzf_TZ8AmwSs8NS4F4YVe641A' }
            ];
            
            return(
                <div className="relative flex h-auto min-h-screen w-full flex-col bg-background-light dark:bg-background-dark group/design-root overflow-hidden">
                    <div className="flex items-center p-4 justify-between shrink-0">
                        <div className="flex w-12 items-center justify-start">
                             <NeumorphicButton onClick={() => navigate(-1)} className="h-12 w-12 text-on-surface-light dark:text-on-surface-dark">
                                <span className="material-symbols-outlined">chevron_left</span>
                            </NeumorphicButton>
                        </div>
                        <h1 className="text-on-surface-light dark:text-on-surface-dark text-xl font-bold">Mi Biblioteca</h1>
                        <div className="flex w-12 items-center justify-end">
                            <Link to="/search">
                                <NeumorphicButton className="h-12 w-12 text-on-surface-light dark:text-on-surface-dark">
                                    <span className="material-symbols-outlined">search</span>
                                </NeumorphicButton>
                            </Link>
                        </div>
                    </div>
                    <div className="px-4 pb-4">
                        <div className="flex gap-2">
                            <button className="px-4 py-2 text-sm font-semibold rounded-full bg-primary text-black">Playlists</button>
                            <NeumorphicButton className="px-4 py-2 text-sm font-semibold rounded-full text-on-surface-variant-light dark:text-on-surface-variant-dark">Artistas</NeumorphicButton>
                            <NeumorphicButton className="px-4 py-2 text-sm font-semibold rounded-full text-on-surface-variant-light dark:text-on-surface-variant-dark">Álbumes</NeumorphicButton>
                        </div>
                    </div>
                    <div className="flex-grow px-4 overflow-y-auto">
                        <div className="space-y-4">
                            <div className="flex items-center gap-4">
                                <div className="w-16 h-16 rounded-lg bg-surface-light dark:bg-surface-dark shadow-neumorphic-light dark:shadow-neumorphic-dark flex items-center justify-center">
                                    <span className="material-symbols-outlined text-4xl text-primary">add</span>
                                </div>
                                <div className="flex-1">
                                    <p className="text-on-surface-light dark:text-on-surface-dark font-semibold">Crear nueva playlist</p>
                                </div>
                            </div>
                            {playlists.map(p => (
                                <div key={p.id} className="flex items-center gap-4">
                                    <img alt={`Playlist '${p.title}'`} className="w-16 h-16 rounded-lg object-cover shadow-neumorphic-light dark:shadow-neumorphic-dark" src={p.image} />
                                    <div className="flex-1">
                                        <p className="text-on-surface-light dark:text-on-surface-dark font-semibold">{p.title}</p>
                                        <p className="text-on-surface-variant-light dark:text-on-surface-variant-dark text-sm">por {p.author} • {p.songs} canciones</p>
                                    </div>
                                    <button className="text-on-surface-variant-light dark:text-on-surface-variant-dark">
                                        <span className="material-symbols-outlined">chevron_right</span>
                                    </button>
                                </div>
                            ))}
                        </div>
                    </div>
                    <div className="flex items-center justify-around px-6 py-2 pb-6 border-t border-black/5 dark:border-white/5 mt-auto">
                        <Link to="/" className="flex flex-col items-center gap-1 text-on-surface-variant-light dark:text-on-surface-variant-dark">
                            <span className="material-symbols-outlined">home</span><span className="text-xs">Inicio</span>
                        </Link>
                        <Link to="/search" className="flex flex-col items-center gap-1 text-on-surface-variant-light dark:text-on-surface-variant-dark">
                            <span className="material-symbols-outlined">search</span><span className="text-xs">Buscar</span>
                        </Link>
                        <Link to="/library" className="flex flex-col items-center gap-1 text-primary">
                            <span className="material-symbols-outlined filled">library_music</span><span className="text-xs font-medium">Biblioteca</span>
                        </Link>
                    </div>
                </div>
            );
        };
        

        // --- Main App Component ---
        const App = () => {
            return (
                <MemoryRouter>
                    <Routes>
                        <Route path="/" element={
                            <PlayerScreen initialTab="cover">
                                {(activeTab) => {
                                    switch(activeTab) {
                                        case 'equalizer': return <EqualizerView />;
                                        case 'wave': return <WaveView />;
                                        case 'list': return <ListView playlistData={playlist} />;
                                        case 'cover':
                                        default: return <CoverView />;
                                    }
                                }}
                            </PlayerScreen>
                        } />
                         <Route path="/player-list" element={
                            <PlayerScreen initialTab="list">
                                {(activeTab) => {
                                     switch(activeTab) {
                                        case 'equalizer': return <EqualizerView />;
                                        case 'wave': return <WaveView />;
                                        case 'cover': return <CoverView />;
                                        case 'list': 
                                        default: return <ListView playlistData={playlist} />;
                                    }
                                }}
                            </PlayerScreen>
                        } />
                         <Route path="/player-eq-detail" element={
                            <PlayerScreen initialTab="equalizer">
                                {() => <EqualizerDetailView />}
                            </PlayerScreen>
                        } />
                        <Route path="/player-wave" element={
                            <PlayerScreen initialTab="wave">
                                {(activeTab) => {
                                    if (activeTab === 'wave') return <WaveViewInteractive />
                                    if (activeTab === 'equalizer') return <EqualizerView />
                                    if (activeTab === 'list') return <ListView playlistData={playlist} />
                                    return <CoverView />
                                }}
                            </PlayerScreen>
                        } />
                        <Route path="/search" element={<SearchPage />} />
                        <Route path="/library" element={<LibraryPage />} />
                    </Routes>
                </MemoryRouter>
            );
        };

        // --- Render the App ---
        const container = document.getElementById('root');
        const root = createRoot(container);
        root.render(<App />);

    </script>
</body>
</html>